<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESIGN | 디자인 - 포스터</title>

    <!--CSS-->
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="css/design.css" type="text/css">
    <link rel="stylesheet" href="../css/fonts.css" type="text/css">

    <!--폰트어썸-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">

    <!--구글폰트-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Brygada+1918:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

    <!--script CDM연결방식-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
        .box_gallery li { width:25%; }
        .slide__container { width:595px; height:842px; }
    </style>
    
</head>
<body>
    <section id="design">
        <div class="subinner">
            <div id="sub-title"><h2>Poster</h2></div>

            <!--투벅스-->
            <div class="gallery">
                <!-- <h5>투벅스 <i>카드뉴스</i></h5> -->
                <ul class="box_gallery">
                    <li>
                        <a href="img/design/poster/poster01.jpg">
                            <img src="img/design/poster/poster01.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster02.jpg">
                            <img src="img/design/poster/poster02.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster08.jpg">
                            <img src="img/design/poster/poster08.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster07.jpg">
                            <img src="img/design/poster/poster07.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster10.jpg">
                            <img src="img/design/poster/poster10.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster03.jpg">
                            <img src="img/design/poster/poster03.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster04.jpg">
                            <img src="img/design/poster/poster04.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster05.jpg">
                            <img src="img/design/poster/poster05.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster06.jpg">
                            <img src="img/design/poster/poster06.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster09.jpg">
                            <img src="img/design/poster/poster09.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster11.jpg">
                            <img src="img/design/poster/poster11.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster12.jpg">
                            <img src="img/design/poster/poster12.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster13.jpg">
                            <img src="img/design/poster/poster13.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster16.jpg">
                            <img src="img/design/poster/poster16.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster14.jpg">
                            <img src="img/design/poster/poster14.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster18.jpg">
                            <img src="img/design/poster/poster18.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster17.jpg">
                            <img src="img/design/poster/poster17.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                    <li>
                        <a href="img/design/poster/poster15.jpg">
                            <img src="img/design/poster/poster15.jpg" alt="이미지1">
                            <!--<span><i><b>설명글</b></i></span>-->
                        </a>
                    </li>
                </ul>
            </div>

            <div class="slide-overlay">
                <button class="close-btn"><!--close--></button>
                <button class="slide-btn --prev">
                    <img src="img/prev.png" alt="">
                </button>
                <button class="slide-btn --next">
                    <img src="img/next.png" alt="">
                </button>
                <div class="slide__container">
                    <ul class="slides"><!--이미지 총 갯수 18개-->
                        <li><img src="" alt="이미지1"></li>
                        <li><img src="" alt="이미지2"></li>
                        <li><img src="" alt="이미지3"></li>
                        <li><img src="" alt="이미지4"></li>
                        <li><img src="" alt="이미지5"></li>
                        <li><img src="" alt="이미지6"></li>
                        <li><img src="" alt="이미지7"></li>
                        <li><img src="" alt="이미지8"></li>
                        <li><img src="" alt="이미지9"></li>
                        <li><img src="" alt="이미지10"></li>
                        <li><img src="" alt="이미지11"></li>
                        <li><img src="" alt="이미지12"></li>
                        <li><img src="" alt="이미지13"></li>
                        <li><img src="" alt="이미지14"></li>
                        <li><img src="" alt="이미지15"></li>
                        <li><img src="" alt="이미지16"></li>
                        <li><img src="" alt="이미지17"></li>
                        <li><img src="" alt="이미지18"></li>
                    </ul>
                </div>
            </div>
            
        </div>

        <!--퀵버튼 시작-->
        <div id="icon_button">
            <a onclick="history.back()" href="./../portfolio.html" target="_self" id="icon_btn" class="icon_btn01"><i class="fa-solid fa-house"></i></a>
            <!-- <a href="#none" target="_blank" id="icon_btn" class="icon_btn02"><i class="fa-solid fa-earth-asia"></i></a> -->
        </div>
        <button type="button" id="top_btn" class="icon_btn03">
            <i class="fa fa-arrow-up" aria-hidden="true"></i>
        </button>
        <script>
            $(function() {
                $("#top_btn").on("click", function() {
                    $("html, body").animate({scrollTop:0}, '500');
                    return false;
                });
            });
        </script>
        <!--퀵버튼 끝-->

    </section>

    <script>
        const overlay = document.querySelector(".slide-overlay");
        let slides = document.querySelectorAll(".slides > li");
        let slidePhoto = document.querySelectorAll(".slides > li>img");
        const slide = document.querySelector(".slides");
        const thumbnails = document.querySelectorAll(".box_gallery > li");
        const photoCount = slides.length;
        const duration = 300;
        let bullets = 0;
        let photoIndex = 0;

        // 갤러리 모달창 이벤트
        thumbnails.forEach((thumbnail) => {
        thumbnail.addEventListener("click", (e) => {
            e.preventDefault();
            overlay.style.display = "block";
            // 썸네일 원본 사진과 갤러리 슬라이드 이미지 소스 링크 연결
            for (let i = 0; i < thumbnails.length; i++) {
            let photo = thumbnails[i].lastElementChild;
            slidePhoto[i].src = photo.href;
            }
        });
        });
        document.querySelector(".close-btn").addEventListener("click", () => {
        overlay.style.display = "none";
        });
        // document.querySelector(".slide-overlay").addEventListener("click", () => {
        // overlay.style.display = "none";
        // });

        // bullet 이미지 개수에 맞게 생성하는 함수
        function createBullets() {
        // bullet들의 리스트를 생성
        const bulletsList = document.createElement("ul");
        bulletsList.setAttribute("id", "bullets");
        overlay.appendChild(bulletsList);
        // 이미지 개수대로 bullet를 생성
        slides.forEach((slide, index) => {
            const a = document.createElement("a");
            a.setAttribute("href", "#");
            // 이미지의 index를 a의 html에 집어넣음 (나중에 이미지 이동할 때 주소 역할이 되어줌)
            a.innerHTML = `${index}`;
            const li = document.createElement("li");
            li.appendChild(a);
            bulletsList.appendChild(li);
        });
        return (bullets = document.querySelectorAll("#bullets > li > a"));
        }
        createBullets();
        bulletLink();


        // bullet을 클릭하면 해당하는 번호의 이미지로 슬라이드 되는 함수
        function bulletLink() {
        bullets.forEach((bullet, index) => {
            bullet.addEventListener("click", (e) => {
            e.preventDefault();
            // 클릭된 bullet의 인덱스
            const clickedIndex = index;
            // 현재 bullet과 클릭된 bullet의 차이
            let step = clickedIndex - photoIndex;
            photoIndex = clickedIndex;
            //모든 bullet의 클래스를 없애고 클릭된 bullet에만 on 클래스 추가
            bulletClassReset();
            bullets[clickedIndex].classList.add("on");

            // 클릭할 때마다 순서가 바뀌는 slides들 업뎃
            slides = document.querySelectorAll(".slides>li")
            let currentSlides = [...slides];
            //step이 양수: 현재 요소보다 뒤에 오는 요소로 이동
            if (step > 0) {
                // 이미지 슬라이드 step의 수 만큼 앞에서 자른다
                let sliceSlides = currentSlides.slice(undefined, step);
                slide.style.transition = duration+"ms";
                slide.style.left=step * -100+"%";
                window.setTimeout(() => {
                slide.removeAttribute("style");
                // 잘린 요소들을 맨 뒤로 집어넣기..
                slide.append(...sliceSlides);
                }, duration);
            } else {
                // step이 음수: 현재 요소보다 앞에 있는 요소로 이동
                sliceSlides = currentSlides.slice(step);
                // 잘린 요소들을 맨 앞으로 집어넣기
                slide.prepend(...sliceSlides);
                slide.style.left = step * 100 + "%";
                window.setTimeout(()=>{ 
                    slide.style.left = 0;
                    slide.style.transition = duration+"ms";
                })
            }
            //서로 같은 경우 이동할 필요가 없기 때문에 함수 즉시 종료
            if (step==0) return;
            });
        });
        }
        //썸네일을 클릭하면 해당하는 사진으로 점프
        thumbnails.forEach((thumbnail, index) => {
            // 클릭 이벤트 추가
            thumbnail.addEventListener("click", (e) => {
            e.preventDefault();
            const clickedIndex = index;
            let step = clickedIndex - photoIndex;
            photoIndex = clickedIndex;
            bulletClassReset();
            bullets[clickedIndex].classList.add("on");
            // 클릭할 때마다 순서가 바뀌는 slides들 업뎃
            slides = document.querySelectorAll(".slides>li");
            let currentSlides = [...slides];
            if (step > 0) {
                // 이미지 슬라이드 step의 수 만큼 앞에서 자른다
                let sliceSlides = currentSlides.slice(undefined, step);
                // 잘린 슬라이드들 맨 뒤로 집어넣기..
                slide.append(...sliceSlides);
            } else {
                sliceSlides = currentSlides.slice(step);
                // 잘린 슬라이드들 맨 앞으로 집어넣기
                slide.prepend(...sliceSlides);
            }
            });
        });


        // 슬라이드 버튼 클릭 이벤트
        document.querySelector(".--next").addEventListener("click", nextSlideImage);
        document.querySelector(".--prev").addEventListener("click", prevSlideImage);

        // 다음 사진으로 슬라이드
        function nextSlideImage() {
        photoIndex++;
        photoIndex %= photoCount;
        slide.style.left = "-100%";
        slide.style.transition = duration + "ms";
        window.setTimeout(() => {
            slide.appendChild(slide.firstElementChild);
            slide.removeAttribute("style");
        }, duration);
        bulletClassReset();
        //해당하는 bullet에 on 클래스 넣기
        bulletIndex();
        }
        // 이전 사진으로 슬라이드
        function prevSlideImage() {
        photoIndex--;
        photoIndex %= photoCount;
        slide.insertBefore(slide.lastElementChild, slide.firstChild);
        slide.style.left = "-100%";
        slide.style.transition = "0ms";
        window.setTimeout(() => {
            slide.style.left = 0;
            slide.style.transition = duration+"ms";
        });
        bulletClassReset();
        //해당하는 bullet에 on 클래스 넣기
        bulletIndex();
        }

        // 모든 bullet의 on 클래스를 삭제
        function bulletClassReset() {
        bullets.forEach((bullet) => {
            bullet.classList.remove("on");
        });
        }

        //해당하는 bullet에 on 클래스 넣기
        function bulletIndex() {
        // photoIndex가 음수일 때를 고려
        let index = photoIndex + bullets.length;
        index %= bullets.length;
        bullets[index].classList.add("on");
        }
    </script>
</body>
</html>